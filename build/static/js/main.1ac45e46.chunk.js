(this["webpackJsonpreact-library"]=this["webpackJsonpreact-library"]||[]).push([[0],{19:function(e,a,t){e.exports=t(38)},24:function(e,a,t){},36:function(e,a,t){},37:function(e,a,t){},38:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),o=t(13),l=t.n(o),c=t(6),u=t(7),m=t(9),s=t(8),i=(t(24),function(e){Object(m.a)(t,e);var a=Object(s.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"library"))}}]),t}(n.Component)),d=t(5),b=t(10),h=(t(36),function(e){Object(m.a)(t,e);var a=Object(s.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).submitData=function(e){var a=b.database().ref("libraryData");document.querySelector("tbody").innerHTML="";var t={bookName:n.bookName.value,authorName:n.authorName.value,numPages:n.numPages.value,isbnNum:n.isbnNum.value,delete:n.delete};""===n.bookName.value||""===n.authorName.value||""===n.numPages.value||""===n.isbnNum.value?alert("Please fill all the fields"):(a.push(t),alert("Data Saved"),n.clearFields()),e.preventDefault()},n.submitData=n.submitData.bind(Object(d.a)(n)),n.bookName=r.a.createRef(),n.authorName=r.a.createRef(),n.numPages=r.a.createRef(),n.isbnNum=r.a.createRef(),n.delete="delete",n}return Object(u.a)(t,[{key:"clearFields",value:function(){this.bookName.value="",this.authorName.value="",this.numPages.value="",this.isbnNum.value=""}},{key:"render",value:function(){var e=this;if(this.props.showForm)return r.a.createElement("div",{className:"mainContent col-md-8"},r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"bookName"},"enter book name"),r.a.createElement("input",{ref:function(a){return e.bookName=a},type:"text",id:"bookName",placeholder:"book name",required:!0}),r.a.createElement("label",{htmlFor:"authorName"},"enter author name"),r.a.createElement("input",{ref:function(a){return e.authorName=a},type:"text",id:"authorName",placeholder:"author name",required:!0}),r.a.createElement("label",{htmlFor:"numPages"},"number of pages"),r.a.createElement("input",{ref:function(a){return e.numPages=a},type:"text",id:"numPages",placeholder:"page count",required:!0}),r.a.createElement("label",{htmlFor:"isbnNum"},"enter the ISBN number"),r.a.createElement("input",{ref:function(a){return e.isbnNum=a},type:"text",pattern:"(97(8|9))?\\d{9}(\\d|X)",id:"isbnNum",placeholder:"isbn number",required:!0}),r.a.createElement("button",{type:"submit",onClick:this.submitData},"submit")))}}]),t}(n.Component)),f=t(16),v=function(e){Object(m.a)(t,e);var a=Object(s.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).retrieveDataFromDB=function(){b.database().ref("libraryData").on("value",n.getData)},n.getData=function(e){if(null!==e.val()){console.log("IN GET DATA ");var a=e.val(),t=Object.keys(a),r=[];for(var o in n.setState({dataKeys:Object(f.a)(n.state.dataKeys.concat(t))}),t){var l=t[o],c=a[l].bookName,u=a[l].authorName,m=a[l].numPages,s=a[l].isbnNum;r.push({bookName:c,authorName:u,numPages:m,isbnNum:s}),n.setState({libraryData:[]}),n.setState({libraryData:Object(f.a)(n.state.libraryData.concat(r))})}console.log("retrieved data : "+r)}else alert("database is empty")},n.generateHeader=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("th",null,"book name"),r.a.createElement("th",null,"author name"),r.a.createElement("th",null,"pages"),r.a.createElement("th",null,"isbn number"),r.a.createElement("th",null,"delete record"))},n.generateTable=function(){console.log("INSIDE GENERATE TABLE");var e=[],a=0,t=n.state.dataKeys;return n.state.libraryData.map((function(o){var l=o.bookName,c=o.authorName,u=o.numPages,m=o.isbnNum;e.push(r.a.createElement("tr",{className:m,key:m},r.a.createElement("td",{className:"bookName"},l),r.a.createElement("td",null,c),r.a.createElement("td",null,u),r.a.createElement("td",null,m),r.a.createElement("td",null,r.a.createElement("button",{id:t[a],className:"deleteBtn",onClick:function(e){n.removeRecord(e)},type:"button"},"delete")))),a++})),e},n.removeRecord=function(e){var a=b.database().ref("libraryData"),t=e.currentTarget.id;a.child(t).remove().then((function(){console.log("Removal Success")})).catch((function(e){console.log("Removal Failed : ",e)})),document.querySelector("tbody").innerHTML=""},n.state={libraryData:[],dataKeys:[]},n.deleteRef=r.a.createRef(),n.removeRecord=n.removeRecord.bind(Object(d.a)(n)),n}return Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("component will mount called"),this.retrieveDataFromDB()}},{key:"render",value:function(){if(this.props.showData)return r.a.createElement("div",{className:"dataTable col-md-12"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",{key:"thead"},this.generateHeader())),r.a.createElement("tbody",null,this.generateTable())))}}]),t}(n.Component),p=t(18),E=(t(37),function(e){Object(m.a)(t,e);var a=Object(s.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).changeFormState=function(){!1===n.state.showForm?n.setState({showForm:!0}):n.setState({showForm:!1}),console.log("add record clicked!")},n.changeShowDataState=function(){!1===n.state.showSavedData?n.setState({showSavedData:!0}):n.setState({showSavedData:!1}),console.log("Show Record Clicked")},n.state={showForm:!1,showSavedData:!1},n.changeFormState=n.changeFormState.bind(Object(d.a)(n)),n.changeShowDataState=n.changeShowDataState.bind(Object(d.a)(n)),n}return Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"sideMenu col-md-12"},r.a.createElement("button",{type:"button",onClick:this.changeFormState},"add record"),r.a.createElement("button",{type:"button",onClick:this.changeShowDataState},"show record")),r.a.createElement(p.a,{className:"formDiv",duration:250,easing:"ease-out"},this.state.showForm&&r.a.createElement(h,{showForm:this.state.showForm})),this.state.showSavedData&&r.a.createElement(v,{showData:this.state.showSavedData})))}}]),t}(n.Component)),y=document.getElementById("mainContainer");l.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(i,null),r.a.createElement(E,null)),y);b.initializeApp({apiKey:"AIzaSyB9btt9B0h0IaF33xkEUH6EyPdsacWh7lQ",authDomain:"react-library-15d5f.firebaseapp.com",databaseURL:"https://react-library-15d5f.firebaseio.com",projectId:"react-library-15d5f",storageBucket:"react-library-15d5f.appspot.com",messagingSenderId:"1030142681853",appId:"1:1030142681853:web:01750638436daace6d5494",measurementId:"G-M8HRQV7VCZ"}),b.analytics()}},[[19,1,2]]]);
//# sourceMappingURL=main.1ac45e46.chunk.js.map